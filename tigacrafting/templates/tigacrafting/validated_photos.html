{% load staticfiles %}

<!DOCTYPE html>
<html lang={% block language %}"en"{% endblock %}>
<head>

    {% block encoding %}<meta charset="utf-8">{% endblock  %}
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta name="description" content="Tigacrafting">
    <meta name="author" content="Movement Ecology Laboratory">

    <title>{% block page_title %}Holet{% endblock %}</title>

    {% block bootstrap_css %}
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/bootstrap-3.2.0-dist/css/bootstrap.min.css" %}>
    {% endblock %}

    {% block fa_css %}
        <!-- FA CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/font-awesome-4.2.0/css/font-awesome.min.css" %}>
    {% endblock %}


{% block fallback_bs_js %}

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% endblock %}


</head>

<body>

{% block main_body %}
    <div class="container theme-showcase" role="main">

        <div class="page-header">

            <h1>{{ title }}
                <small>{{ short_description }} </small></h1>

        </div>


        {% for highlight in these_highlights %}

            <script>
                eval("function map_init_highlight{{ highlight.id }}(map, options) {L.polyline(these_latlngs, {weight: 5, opacity: 1, color: 'black'}).addTo(map);L.polyline(these_latlngs, {weight: 2, opacity: 1, color: 'red'}).addTo(map);L.marker([{{ highlight.step.latitude }}, {{ highlight.step.longitude }}],{icon:{% if highlight.type == 0 %}poi_icon{% else %}wp_icon{% endif %}}).addTo(map);map.setView([{{ highlight.step.latitude }}, {{ highlight.step.longitude }}], 18)}");
            </script>

            <br>

            <div id="h{{ highlight.id }}" class="row">

                <div class="col-md-4">
                    <h3>{{ highlight.name }}</h3>
                    {% if owner %}
                        <a class="btn btn-default" href={% url "edit_highlight" id highlight.id %} role="button"> <span class="glyphicon glyphicon-edit"></span> </a> <a class="btn btn-default" href={% url 'make_new_highlight_reference' id highlight.id %}> <span class="glyphicon glyphicon-upload"></span>  <span class="glyphicon glyphicon-book"></span> </a> <a class="btn btn-default" href={% url 'create_ii' highlight.id %}> <span class="glyphicon glyphicon-upload"></span>  <span class="glyphicon glyphicon-picture"></span> </a>{% endif %}


                    <p>{{ highlight.long_text }}</p>

                </div>

                <div class="col-md-4">
                {% if highlight.media %}
                    {% if highlight.image %}
                        <a href={{ highlight.media.url }}><img width=100% src={{ highlight.media.url }}></a>
                    {% elif highlight.video %}
                        <video width="100%" height="100%" controls>
                            <source type="video/{{ highlight.media_ext }}" src={{ highlight.media.url }}>
                            Your browser does not support the video tag.
                        </video>
                    {% endif %}
                {% endif %}

                </div>

                <div class="col-md-4">
                    <div id="highlight{{ highlight.id }}" class="highlight-container"></div>
                </div>

            </div>



    {% for ii in highlight.interactive_images %}
<div class="row">

    <a href="{% url 'view_ii' ii.id %}" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-picture"></span> Interactive Image{% if highlight.interactive_images|length > 1 %} {{ forloop.counter }}{% endif %}
</a>


</div>
<br>

        {% endfor %}


            {% for ref in highlight.references %}
<div class="row">


    <button onclick="toggle_iframe('ref_div{{ ref.id }}');" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-chevron-down"></span>  <span class="glyphicon glyphicon-book"></span> Reference{% if highlight.references|length > 1 %}: {{ ref.name }}{% endif %}
</button>

</div>

<div class="row">
<div class='ref_div' id='ref_div{{ ref.id }}'>
<div id='confirm_delete_reference_alert{{ ref.id }}' class='alert alert-warning' role='alert'><p><strong>Warning!</strong>Are you sure you want to delete this reference?</p><br><button onclick="hide_alert({{ ref.id }})" role="button" class='btn btn-success'>No, go back</button> <a class='btn btn-warning' href={% url 'delete_highlight_reference' id ref.id %}>Yes, delete it</a></div>
<br>
    {% if owner %}<a class="btn btn-default" href={% url 'edit_highlight_reference' id ref.id %}> <span class="glyphicon glyphicon-edit"></span> </a> <button class="btn btn-default" onclick="confirm_delete_reference({{ ref.id }})"> <span class="glyphicon glyphicon-remove-circle"></span> </button>{% endif %}

              {{ ref.html | safe }}
</div>
</div>
<br>
{% endfor %}
            <div class="border-row"></div>


        {% endfor %}

    </div>




{% endblock %}


{% block body_scripts %}

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src={% static "tigacrafting/jquery/1.11.1/jquery.min.js" %}></script>
    <script src={% static "tigacrafting/bootstrap-3.2.0-dist/js/bootstrap.min.js" %}></script>
    <script src={% static "tigacrafting/bootstrap-3.2.0-assets/js/docs.min.js" %}></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src={% static "tigacrafting/bootstrap-3.2.0-assets/js/ie10-viewport-bug-workaround.js" %}></script>
{% endblock %}

</body>
</html>
