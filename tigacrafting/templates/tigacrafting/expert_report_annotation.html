{% load staticfiles %}
{% load leaflet_tags %}
{% load i18n %}
{% load floppyforms %}


<!DOCTYPE html>
<html lang={% block language %}"en"{% endblock %}>
<head>

    {% block encoding %}
        <meta charset="utf-8">{% endblock %}
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta name="description" content="Tigacrafting">
    <meta name="author" content="Movement Ecology Laboratory">

    <title>{% block page_title %}Tigacrafting{% endblock %}</title>

    {% block bootstrap_css %}
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/bootstrap-3.2.0-dist/css/bootstrap.min.css" %}>
        <link rel="stylesheet" href={% static "tigacrafting/bootstrap-select/css/bootstrap-select.min.css" %}>
    {% endblock %}

    <script src={% static "tigacrafting/jquery/1.11.1/jquery.min.js" %}></script>
    <script src={% static "tigacrafting/jquery-ui/jquery-ui.min.js" %}></script>
    <link rel="stylesheet" href={% static "tigacrafting/jquery-ui/jquery-ui.css" %}>

    <script type="text/javascript" src={% static "tigacrafting/jquery-qrcode/jquery.qrcode.min.js" %}></script>
    <style>
        #ex1Slider .slider-selection {
            background: #BABABA;
        }

    </style>

    {% block fa_css %}
        <!-- FA CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/font-awesome-4.2.0/css/font-awesome.min.css" %}>
    {% endblock %}


    {% block fallback_bs_js %}

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% endblock %}

    {% leaflet_js %}
    {% leaflet_css %}


    <link rel="stylesheet" href={% static "tigacrafting/tigacrafting_style.css" %}>

    <script type="text/javascript">

        var mosquito_icon_class = L.Icon.Default.extend({
            options: {
                iconUrl: '{% static "tigamap/yellow_icon.png" %}'
            }
        });

        var mosquito_icon = new mosquito_icon_class;

        {% for form in formset %}
            function map_init_basic{{ form.instance.id }}(map, options) {

                L.marker([{{ form.instance.report.lat }}, {{ form.instance.report.lon }}], {icon: mosquito_icon}).bindPopup('<p><strong>Lat:</strong> {{ form.instance.report.lat }}</p><p><strong>Lon:</strong> {{ form.instance.report.lon }}</p>').addTo(map);

            }
        {%  endfor %}

    </script>

</head>

<body>

{% block navbar %}
    <!-- NAVBAR
================================================== -->
    <div class="navbar-wrapper">
        <div class="container">
            <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <div id="navbar" class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <div class="navbar-brand"><span
                                style="color:#ff9900; font-size: small">Tigatrapp
                            Validation <i
                                id="gear"
                                class="fa fa-refresh fa-spin"></i></span>
                        </div>
                    </div>
                    <div class="navbar-collapse collapse">

                        <ul class="nav navbar-nav navbar-left">
                            {% block navbar_left_items %}
                            <li>

                                <div class="btn-group" id="status_grp" data-toggle="buttons">
                                    <label class="btn btn-primary btn-sm navbar-btn" data-toggle="tooltip" data-placement="bottom" title="Pending" id="pending_btn">
                                        <input type="radio" name="status" autocomplete="off"><span class="glyphicon glyphicon-time" {% if n_pending > 0 %}style="color:#FF8576"{% endif %}></span> <span class="badge">{{ n_pending }}</span></label>
                                    <label class="btn btn-primary btn-sm navbar-btn" data-toggle="tooltip" data-placement="bottom" title="Complete" id="complete_btn">
                                        <input type="radio" name="status" autocomplete="off"><span class="glyphicon glyphicon-check"></span> <span
                                            class="badge">{{ n_complete }}</span>
                                    </label>
                                </div>
                            </li>

                            <li>
                                <span data-toggle="modal" data-target="#myModal"><button type="button" class="btn btn-warning btn-sm navbar-btn" data-toggle="tooltip" data-placement="bottom" title="Filter" style="margin-left:5px"><span class="glyphicon glyphicon-filter" {% if orderby != 'date' or tiger_certainty != 'all' or site_certainty != 'all' or status != 'all' %}style="color:black"{% endif %}></span>
                                </button></span>
                            </li>

                            {% endblock %}


                            <li>
                                <span data-toggle="modal" data-target="#searchModal"><button type="button" class="btn btn-warning btn-sm navbar-btn"  data-toggle="tooltip" data-placement="bottom" title="Search" style="margin-left:5px"><span class="glyphicon glyphicon-search" {% if version_uuid != 'na' or linked_id != 'na' %}style="color:black"{% endif %}></span></button></span>
                            </li>

                            {% block grab_reports_button %}
                                <li>
                                    <button style="margin-left: 5px;" id="grab_reports_button" role="button" class="btn btn-danger btn-sm navbar-btn" data-toggle="tooltip" data-placement="bottom" title="Grab new reports"><span class="glyphicon glyphicon-download"></span></button>
                                </li>
                            {% endblock %}


                            <li>
                                <button id="save_button" type="submit" class="btn btn-success btn-sm navbar-btn" style="margin-left:5px"  data-toggle="tooltip" data-placement="bottom" title="Save"><span
                                        class="glyphicon glyphicon-floppy-disk"></span>
                                </button>
                            </li>
                        </ul>


                        <ul class="nav navbar-nav navbar-right">

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle"
                                   data-toggle="dropdown">Reports per page
                                    <span class="caret"></span></a>
                                <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                    {% for n in tasks_per_page_choices %}
                                        <li><a href="{% url 'expert_report_annotation_tasks_per_page' n %}?orderby={{ orderby }}&tiger_certainty={{ tiger_certainty }}&site_certainty={{ site_certainty }}&status={{ status }}&pending={{ pending }}&final_status={{ final_status }}&checked={{ checked }}">{{ n }}</a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </li>


                            <li><p class="navbar-text">{{ request.user.username }}</p></li>
                            <li><a href="{% url "auth_logout" %}">logout</a>
                            </li>
                        </ul>


                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block main_body %}


    <div class="container">

        <div class="starter-template">

            <h1>{% block title %}Expert Report Validation:{% endblock %}</h1>


            <div style="text-align: left">
                <h4> Instructions</h4>

                {% block instructions %}
                <p>For each report: (1) select a category for your degree of belief that the report contains at least
                    one photo showing an adult tiger mosquito, (2) select a category for your degree of belief that the
                    report contains at least one photo showing a tiger mosquito breeding site, (4) add any internal
                    notes for yourself or other experts regarding your reasons for each selection, (4) add any note you
                    want
                    to see displayed on the public map along with the report (e.g. an edited version of the user's
                    original note), (5) flag the report if you want to bring it to the attention of other experts
                    (because it is an especially interesting report or because you have doubts), (6) indicate if the
                    report should be hidden from public view (this will automatically
                    remove it from the public map), and (7) select which (if any) of the reports photos should be
                    displayed on the public map (only one photo will be displayed). You can save your work as you go
                    using the "save" button at the top of the screen. When you are done with a given report, check the
                    "validation complete" box.</p>

                    {% endblock %}
            </div>
        </div>

        {% if objects %}

            {% if pending == 'pending' or checked == 'unchecked' or checked == 'confirmed' or checked == 'revised' %}
            <form id="formset_forms" class="form-vertical" method="post">{% csrf_token %}
            {% endif %}
                {{ formset.management_form }}
                {% for form in formset %}
                    <div class="row">
                        <div class="col-md-12">
                            <strong>Report: {{ form.instance.report.version_UUID }}</strong>, Type:
                            {{ form.instance.report.type }}{% if form.instance.report.type == 'site' %} (
                                {{ form.instance.report.site_type_trans }}){% endif %},
                            Created: {{ form.instance.report.creation_time }} UTC, Num. Tiger Certainty
                            Scores: {{ form.instance.report.get_n_expert_report_annotations_tiger_certainty }}, Num. Site
                            Certainty
                            Scores: {{ form.instance.report.get_n_expert_report_annotations_site_certainty }}


                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <br>

                {% block view_others_annotations %}
                            {% endblock %}



            {% if pending == 'pending' or checked == 'unchecked' or checked == 'confirmed' or checked == 'revised' %}
`
                            {% form form using "floppyforms/layouts/bootstrap.html" %}
            {% else %}


                <strong>Tiger Certainty:</strong><br>
                <div style="border:1px solid #333333;padding:2px;">
                {% if form.instance.get_tiger_certainty_category_display %}{{ form.instance.get_tiger_certainty_category_display }}{% else %}---{% endif %}</div><br>
                <strong>Internal Tiger Certainty Comments:</strong><br>
                <div style="overflow: auto;height: 150px;border:1px solid #333333;padding:2px;">
                {{ form.instance.tiger_certainty_notes }}</div><br>
                <strong>Site Certainty:</strong><br>
                <div style="border:1px solid #333333;padding:2px;">
                {% if form.instance.set_site_certainty_category_display %}{{ form.instance.set_site_certainty_category_display }}{% else %}---{% endif %}</div><br>
                <strong>Internal Site Certainty Notes:</strong><br>
                <div style="overflow: auto;height: 150px;border:1px solid #333333;padding:2px;">
                {{ form.instance.site_certainty_notees }}</div><br>
                <strong>Public Note:</strong><br>
                <div style="overflow: auto;height: 150px;border:1px solid #333333;padding:2px;">
                {{ form.instance.edited_user_notes }}</div><br>
                <strong>Message To User:</strong><br>
                <div style="overflow: auto;height: 150px;border:1px solid #333333;padding:2px;">
                {{ form.instance.message_for_user }}</div><br>
                <strong>Status:</strong><br>
                <div style="border:1px solid #333333;padding:2px;">
                {%  if form.instance.get_status_display %}{{ form.instance.get_status_display }}{% else %}---{% endif %}</div><br>
                <strong>Linked ID:</strong><br>
                <div style="border:1px solid #333333;padding:2px;">
                {% if form.instance.linked_id %}{{ form.instance.linked_id }}{%  else %}---{% endif %}</div>



             {% endif %}

                        </div>

                        <div class="col-md-5">
                            <br>
                            <strong>Photos</strong> <button id="clear_button_{{ form.instance.id }}" type="button" class="btn btn-default btn-sm">Reset</button><br>

                            <div style="overflow: auto;height: 814px;">

                                {{ form.instance.report.photo_html_for_report_validation | safe }}

                            </div>

                        </div>

                        <div class="col-md-4">
                            <br>
                            <strong>Location</strong>

                            <div id="map{{ form.instance.id }}" class="report_annotation_map-container">

                                                                <div style="z-index:100; position:absolute; top:0; right:0;" id="qrcode{{ form.instance.id }}"></div>

                            </div>


                            <br>
                            <strong>User Responses</strong><br>

                            <div style="overflow: auto;height: 150px;border:1px solid #333333;padding:2px;">
                                {{ form.instance.report.response_html  | safe }}
                            </div>
                            <br>
                            <strong>User Notes</strong><br>

                            <div style="overflow: auto;height: 270px;border:1px solid #333333;padding:2px;">
                                {{ form.instance.report.note }}
                            </div>

                        </div>

                    </div>

                    <br>
                    <div class="border-row">

                        <br>

                    </div>

                    <script>
                        if ($('#' + '{{ form.best_photo.auto_id }}').val() !== undefined) {
                            $('#' + $('#' + '{{ form.best_photo.auto_id }}').val()).attr('checked', true);
                        }

                        $('input:radio[name=photo_to_display_report_' + '{{ form.instance.report.version_UUID }}' + ']').change(function () {
                            $('#' + '{{ form.best_photo.auto_id }}').val(this.value);
                        });


                    $("#clear_button_{{ form.instance.id }}").click(function (){
                         $('#' + '{{ form.best_photo.auto_id }}').val(null);
                        $('input:radio[name=photo_to_display_report_' + '{{ form.instance.report.version_UUID }}' + ']').attr('checked',false);

                    });


                    </script>


                {% endfor %}

                <input id="scroll_position" type="text" name="scroll_position" style="display: none;" value="0">
                <input id="pending_hidden_btn" type="text" name="pending" style="display: none;" value="{{ pending }}">
                <input type="text" name="orderby" style="display: none;" value="{{ orderby }}">
                <input type="text" name="tiger_certainty" style="display: none;" value="{{ tiger_certainty }}">
                <input type="text" name="site_certainty" style="display: none;" value="{{ site_certainty }}">
                <input type="text" name="status" style="display: none;" value="{{ status }}">
                <input type="text" name="final_status" style="display: none;" value="{{ final_status }}">



            </form>

            <div class="row">

                <div class="col-md-12">

                    <div class="pagination">
        <span class="step-links">
            {% if objects.has_previous %}
                <a href="?page={{ objects.previous_page_number }}">Previous</a>
            {% endif %}

            <span class="current">
                Page {{ objects.number }} of {{ objects.paginator.num_pages }}
            </span>

            {% if objects.has_next %}

                <button id="next_page_button" class="btn btn-default btn-sm active" type="button">Next</button>
            {% endif %}

            <br>
                <form role="form" class="form-inline">
                    <div class="form-group">
                        <input type="number" min="1" max="{{ objects.paginator.num_pages }}"
                               class="form-control input-sm" id="page_input" placeholder="Go to page"
                               style="width:100px;">
                        <button id="page_button" class="btn btn-default btn-sm active" type="button">Go</button>
                    </div>

                </form>

        </span>
                    </div>


                </div>
            </div>

        {% else %}
            {% block no_records_message %}
                {% if pending == 'pending' %}
            <p>You do not yet have any pending reports in your stack. Click "Get more reports" to start validating.</p>
                {% else %}
            <p>No reports match your search criteria.</p>

                {% endif %}
            {% endblock %}
        {% endif %}

    </div>


    {% block filter_modal %}
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Filters</h4>
                    </div>
                    <div class="modal-body">
                        <form role="form" class="form-horizontal">

                            <div class="form-group">
                                <label for="orderby_select" class="col-sm-4 control-label">Order By:</label>

                                <div class="col-sm-8">
                                    <select id="orderby_select" class="selectpicker show-tick form-control">
                                        <option value="date">Report Date</option>
                                        <option value="tiger_score">Tiger Certainty Score</option>
                                        <option value="site_score">Site Certainty Score</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="tiger_certainty_select" class="col-sm-4 control-label">Tiger Certainty
                                    Category:</label>

                                <div class="col-sm-8">
                                    <select id="tiger_certainty_select" class="selectpicker show-tick form-control">
                                        <option value="all">All</option>
                                        <option value="-2">Definitely not a tiger mosquito</option>
                                        <option value="-1">Probably not a tiger mosquito</option>
                                        <option value="0">Not sure</option>
                                        <option value="1">Probably a tiger mosquito</option>
                                        <option value="2">Definitely a tiger mosquito</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="site_certainty_select" class="col-sm-4 control-label">Site Certainty
                                    Category:</label>

                                <div class="col-sm-8">
                                    <select id="site_certainty_select" class="selectpicker show-tick form-control">
                                        <option value="all">All</option>
                                        <option value="-2">Definitely not a breeding site</option>
                                        <option value="-1">Probably not a breeding site</option>
                                        <option value="0">Not sure</option>
                                        <option value="1">Probably a breeding site</option>
                                        <option value="2">Definitely a breeding site</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="status_select" class="col-sm-4 control-label">Status:</label>

                                <div class="col-sm-8">
                                    <select id="status_select" class="selectpicker show-tick form-control">
                                        <option value="all">All</option>
                                        <option value="public">Public</option>
                                        <option value="flagged">Flagged</option>
                                        <option value="hidden">Hidden</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="button" id="filters_submit_button" class="btn btn-warning">Apply</button>
                    </div>
                </div>
            </div>
        </div>


    {% endblock %}



        {% block search_modal %}
        <!-- Modal -->
        <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="searchModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <form role="form" class="form-inline">

                            <div class="form-group">
                                <label for="version_uuid_select">Report ID:</label>

                                    <select id="version_uuid_select" class="selectpicker show-tick form-control" data-live-search="true">
                                    <option value=""></option>
                                        {% for version_uuid in my_version_uuids %}
                                        <option value="{{ version_uuid.values | first }}">{{ version_uuid.values | first }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
<button type="button" id="search_version_uuid_submit_button" class="btn btn-default">Search</button>

                        </form>

                        <form role="form" class="form-inline">

                            <div class="form-group">
                                <label for="linked_id_select">Linked ID:</label>

                                    <select id="linked_id_select" class="selectpicker show-tick form-control" data-live-search="true">
                                    <option value=""></option>
                                        {% for linked_id in my_linked_ids %}
                                        <option value="{{ linked_id.values | first }}">{{ linked_id.values | first }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
<button type="button" id="search_linked_id_submit_button" class="btn btn-default">Search</button>
                        </form>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>


    {% endblock %}


{% endblock %}


{% block body_scripts %}

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src={% static "tigacrafting/bootstrap-3.2.0-dist/js/bootstrap.min.js" %}></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src={% static "tigacrafting/bootstrap-3.2.0-assets/js/ie10-viewport-bug-workaround.js" %}></script>

    <script src="{% static "tigacrafting/bootstrap-select/js/bootstrap-select.min.js" %}"></script>

    <script type="text/javascript">
        (function () {
            function loadmap() {

                {% for form in formset %}

                    var centerLat = {{ form.instance.report.lat }};
                    var centerLng = {{ form.instance.report.lon }};
                    var initialZoom = 6;
                    var djoptions = {"layers": [
                                ["OSM", "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                                    "\u00a9 <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors"]
                            ],
                                "minimap": true, "scale": "metric", "center": [centerLat, centerLng], "tilesextent": [],
                                "attributionprefix": null, "zoom": initialZoom, "maxzoom": 18, "minzoom": 0, "extent": [
                                    [-90,
                                        -180],
                                    [90,
                                        180]
                                ], "resetview": true, "srid": null, "fitextent": true},
                            options = {djoptions: djoptions, initfunc: loadmap,
                                globals: false, callback: window.map_init_basic};

                    L.Map.djangoMap('map{{ form.instance.id }}', {djoptions: djoptions, initfunc: loadmap,
                        globals: false, callback: eval("window.map_init_basic{{ form.instance.id }}")});
                {% endfor %}

            }

            var loadevents = ["load"];
            if (loadevents.length === 0) loadmap();
            else if (window.addEventListener) for (var i = 0; i < loadevents.length; i++) window.addEventListener(loadevents[i], loadmap, false);
            else if (window.jQuery) jQuery(window).on(loadevents.join(' '), loadmap);
        })();
    </script>



    <script>

        var pending = "{{ pending }}";

        var scroll_position = parseInt({{ scroll_position }});
        if (scroll_position != null && !isNaN(scroll_position) && isFinite(scroll_position)) {
            $(window).scrollTop(scroll_position);
        }

        var grab_reports_button = $("#grab_reports_button");
        var n_pending = {{ n_pending }};
        function toggle_grab_reports_button() {
            if (n_pending < 5) {
                grab_reports_button.prop('disabled', false);
            } else {
                grab_reports_button.prop('disabled', true);
            }
        }

        $('input[id~="value_changed"]').hide();
        $('label[for~="value_changed"]').hide();

        var gear = $("#gear").hide();

        $(document).ready(function () {

            $('[data-toggle="tooltip"]').tooltip()

            $("select").selectpicker({
                width: 'auto'
            });

            $("#save_button").click(function () {
                gear.show();
                toggle_grab_reports_button();
                $("#formset_forms").submit();
            });

            toggle_grab_reports_button();

            {% for form in formset %}

            jQuery('#qrcode{{ form.instance.id }}').qrcode({
                width: 64,
                height: 64,
                text: "geo:{{ form.instance.report.lat }},{{ form.instance.report.lon }}"
            });

            {% endfor %}
        });

        var scroll_position_input = $("#scroll_position");

        $(window).scroll(function (event) {
            var scroll = $(window).scrollTop();
            scroll_position_input.val(scroll);
        });


    </script>

    {% block filterjs %}
        <script>


            function query_selectors() {
                var qp = "?orderby=" + $("#orderby_select").val();
                qp += "&tiger_certainty=" + $("#tiger_certainty_select").val();
                qp += "&site_certainty=" + $("#site_certainty_select").val();
                qp += "&status=" + $("#status_select").val();
                qp += "&pending=" + pending;
                return(qp);
            }

            function submit_queries() {
                gear.show();
                var qp = query_selectors();
                $('#myModal').modal('hide');
                window.location.href = qp;
            }


            function submit_queries_plus(event) {
                gear.show();
                pending = event.data.extr;
                window.location.href = query_selectors();
            }

            $("#orderby_select").val("{{ orderby }}");
            $("#tiger_certainty_select").val("{{ tiger_certainty }}");
            $("#site_certainty_select").val("{{ site_certainty }}");
            $("#status_select").val("{{ status }}");
            var pending_btn = $("#pending_btn"), complete_btn = $("#complete_btn");
            pending == "complete" ? complete_btn.addClass("active") : pending_btn.addClass("active");
            pending_btn.on('click', {extr: 'pending'}, submit_queries_plus);
            complete_btn.on('click', { extr: 'complete'}, submit_queries_plus);



        </script>
    {% endblock %}

    <script>


        $("#filters_submit_button").on('click', submit_queries);



            function submit_search_version_uuid() {
                gear.show();
                $('#searchModal').modal('hide');
                window.location.href = "?version_uuid=" + $("#version_uuid_select").val();
            }

            function submit_search_linked_id() {
                gear.show();
                $('#searchModal').modal('hide');
                window.location.href = "?linked_id=" + $("#linked_id_select").val();
            }

        $("#search_version_uuid_submit_button").on('click', submit_search_version_uuid);


         $("#search_linked_id_submit_button").on('click', submit_search_linked_id);


        grab_reports_button.on('click', function () {
            gear.show();
            var qp = query_selectors();
            qp += "&load_new_reports=T";
            window.location.href = qp;
        })


        $("#page_button").on('click', function () {
            var qp = query_selectors();
            qp += "&page=" + $("#page_input").val();
            window.location.href = qp;

        });

        var nb = $("#next_page_button");
        {% if objects.has_next %}
            nb.show().on('click', function () {
                gear.show();
                var qp = query_selectors();
                qp += "&page={{ objects.next_page_number }}";
                window.location.href = qp;
            });
        {% else %}
            nb.hide();
        {% endif %}


    </script>




{% endblock %}

</body>
</html>
